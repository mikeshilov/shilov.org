<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>Armenian numbers trainer</title>
</head>
<body style="padding: 10px">
<div id="container" class="container">
    <h1 id="number"></h1>
    <label for="answer" class="form-label">In Armenian</label>
    <input id="answer" type="text" class="form-control">
    <div id="feedback" class="invalid-feedback" style="display: none">
    </div>
    <div class="progress my-3">
        <div id="progress" class="progress-bar progress-bar-striped" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script>
    const elNumber = document.getElementById("number"),
        elAnswer = document.getElementById("answer"),
        elProgress = document.getElementById("progress"),
        elContainer = document.getElementById("container"),
        elFeedback = document.getElementById("feedback");

    const numbers = shuffle ([...Array(21).keys(), 30, 40, 50, 60, 70, 80, 90, 100, 1000]);
    const trans = {
        0: "զրո",
        1: "մեկ",
        2: "երկու",
        3: "երեք",
        4: "չորս",
        5: "հինգ",
        6: "վեց",
        7: "յոթ",
        8: "ութ",
        9: "ինը",
        10: "տասը",
        11: "տասնմեկ",
        12: "տասներկու",
        13: "տասներեք",
        14: "տասնչորս",
        15: "տասնհինգ",
        16: "տասնվեց",
        17: "տասնյոթ",
        18: "տասնութ",
        19: "տասնինը",
        20: "քսան",
        30: "երեսուն",
        40: "քառասուն",
        50: "հիսուն",
        60: "վաթսուն",
        70: "յոթանասուն",
        80: "ութսուն",
        90: "իննսուն",
        100: "հարյուր",
        1000: "հազար"
    }

    function shuffle(array) {
        let currentIndex = array.length,  randomIndex;

        // While there remain elements to shuffle.
        while (currentIndex !== 0) {

            // Pick a remaining element.
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;

            // And swap it with the current element.
            [array[currentIndex], array[randomIndex]] = [
                array[randomIndex], array[currentIndex]];
        }

        return array;
    }

    function newNumber () {
        elNumber.innerText = numbers[curItem];
        elAnswer.value = "";
        elAnswer.classList.remove("is-invalid");
        const progress = Math.round(curItem * 100 / testItems);
        elProgress.setAttribute('aria-valuenow', String(progress));
        elProgress.setAttribute('style','width:' + progress + '%');
        elFeedback.setAttribute('style','display: none');
    }

    elAnswer.addEventListener("keyup", function(event) {
        if (event.key === "Enter") {
            if (trans[numbers[curItem]].toLowerCase() === elAnswer.value.trim().toLowerCase()) {
                curItem += 1;
                if (curItem >= testItems) {
                    elContainer.innerHTML = "<h1>Well done!</h1>";
                } else {
                    newNumber();
                }
            } else {
                elAnswer.classList.add("is-invalid");
                elFeedback.innerText = trans[numbers[curItem]].toLowerCase() + " !== " + elAnswer.value.trim().toLowerCase();
                elFeedback.setAttribute('style','display: block');
            }
        }
    });

    const testItems = 10;
    let curItem = 0;
    newNumber();
    elAnswer.focus();

</script>
</body>
</html>